function w(){const t=document.getElementById("voice-track"),p=document.getElementById("voice-prev"),y=document.getElementById("voice-next"),S=document.querySelectorAll(".p-voice__dot");if(!t||!p||!y)return;const h=Array.from(t.querySelectorAll(".p-voice__slide")),c=h.length;if(c===0)return;let r=0;function f(){const e=Array.from(t.querySelectorAll(".p-voice__card"));if(e.length===0)return;e.forEach(o=>{o.style.height="auto"});let n=0;e.forEach(o=>{const M=o.offsetHeight;M>n&&(n=M)}),n>0&&e.forEach(o=>{o.style.height=`${n}px`})}const X=h[0].cloneNode(!0),x=h[c-1].cloneNode(!0);X.classList.add("is-clone"),x.classList.add("is-clone"),t.innerHTML="",t.appendChild(x),h.forEach(e=>t.appendChild(e)),t.appendChild(X),Array.from(t.querySelectorAll(".p-voice__slide")),f();let s=1,u=!1;function _(){const e=t.closest(".p-voice__slider");e&&(r=e.offsetWidth,f(),m(s))}function T(e){u||(u=!0,t.style.transition="transform 0.3s ease",t.style.transform=`translateX(${-e*r}px)`,s=e,A())}function m(e){t.style.transition="none",t.style.transform=`translateX(${-e*r}px)`,s=e,setTimeout(()=>{t.style.transition="transform 0.3s ease"},50),A()}function $(){return s===0?c-1:s===c+1?0:s-1}function A(){const e=$();S.forEach((n,o)=>{o===e?n.classList.add("is-active"):n.classList.remove("is-active")}),p.disabled=!1,y.disabled=!1}function g(){T(s+1)}function E(){T(s-1)}t.addEventListener("transitionend",e=>{if(e.propertyName==="transform"){if(u=!1,s===0){m(c);return}if(s===c+1){m(1);return}}}),p.addEventListener("click",E),y.addEventListener("click",g);const d=t.closest(".p-voice__slider");if(!d)return;let i=0,a=0,l=!1;function q(e){r!==0&&(i=e.touches[0].clientX,a=i,l=!0,t.style.transition="none",e.preventDefault())}function D(e){if(!l||r===0)return;a=e.touches[0].clientX;const n=a-i;t.style.transform=`translateX(${-s*r+n}px)`,e.preventDefault()}function C(e){if(!l)return;l=!1;const n=a-i,o=r*.2;t.style.transition="transform 0.3s ease",Math.abs(n)>o?n>0?E():g():(t.style.transform=`translateX(${-s*r}px)`,u=!1)}function B(e){r!==0&&(i=e.clientX,a=i,l=!0,t.style.transition="none",e.preventDefault())}function b(e){if(!l||r===0)return;a=e.clientX;const n=a-i;t.style.transform=`translateX(${-s*r+n}px)`}function k(e){if(!l)return;l=!1;const n=a-i,o=r*.2;t.style.transition="transform 0.3s ease",Math.abs(n)>o?n>0?E():g():(t.style.transform=`translateX(${-s*r}px)`,u=!1)}d.addEventListener("touchstart",q,{passive:!1}),d.addEventListener("touchmove",D,{passive:!1}),d.addEventListener("touchend",C,{passive:!0}),d.addEventListener("touchcancel",C,{passive:!0}),d.addEventListener("mousedown",B),document.addEventListener("mousemove",b),document.addEventListener("mouseup",k),window.addEventListener("resize",_),_(),m(1);const I=t.querySelectorAll("img");let v=0;const L=I.length;L>0?I.forEach(e=>{e.complete?(v++,v===L&&f()):e.addEventListener("load",()=>{v++,v===L&&f()})}):setTimeout(()=>{f()},100)}document.addEventListener("DOMContentLoaded",function(){w()});
