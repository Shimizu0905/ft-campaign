function x(){const e=document.getElementById("gallery-track"),s=document.getElementById("gallery-lightbox"),l=document.getElementById("gallery-lightbox-img"),d=document.getElementById("gallery-lightbox-overlay"),m=document.getElementById("gallery-lightbox-close");if(!e)return;function u(){const t=Array.from(e.querySelectorAll(".p-gallery__item"));if(t.length===0)return;e.querySelectorAll(".p-gallery__item--clone").forEach(i=>i.remove()),t.forEach(i=>{const a=i.cloneNode(!0);a.classList.add("p-gallery__item--clone"),e.appendChild(a)})}u();let g;window.addEventListener("resize",()=>{clearTimeout(g),g=setTimeout(()=>{u()},250)});function E(t,n){!s||!l||(l.src=t,l.alt=n||"ジム設備",s.classList.add("is-open"),document.body.classList.add("is-gallery-lightbox-open"))}function c(){s&&(s.classList.remove("is-open"),document.body.classList.remove("is-gallery-lightbox-open"))}e.addEventListener("click",t=>{const n=t.target.closest(".p-gallery__img");if(!n)return;const i=n.src,a=n.alt;E(i,a)}),m&&m.addEventListener("click",c),d&&d.addEventListener("click",c),document.addEventListener("keydown",t=>{t.key==="Escape"&&(s!=null&&s.classList.contains("is-open"))&&c()});let y=0,f=0,o=!1,p=0;e.addEventListener("touchstart",t=>{o=!0,y=t.touches[0].pageX;const n=window.getComputedStyle(e);p=new DOMMatrix(n.transform).e,e.style.animationPlayState="paused"},{passive:!0}),e.addEventListener("touchmove",t=>{if(!o)return;t.preventDefault(),f=t.touches[0].pageX;const n=f-y;e.style.transform=`translateX(${p+n}px)`},{passive:!1}),e.addEventListener("touchend",()=>{o&&(o=!1,e.style.transform="",setTimeout(()=>{e.style.animationPlayState="running"},100))},{passive:!0});let v=0,L=0,r=!1;e.addEventListener("mousedown",t=>{r=!0,v=t.pageX;const n=window.getComputedStyle(e);L=new DOMMatrix(n.transform).e,e.style.animationPlayState="paused",e.style.cursor="grabbing"}),e.addEventListener("mousemove",t=>{if(!r)return;t.preventDefault();const n=t.pageX-v;e.style.transform=`translateX(${L+n}px)`}),e.addEventListener("mouseup",()=>{r&&(r=!1,e.style.cursor="",e.style.transform="",setTimeout(()=>{e.style.animationPlayState="running"},100))}),e.addEventListener("mouseleave",()=>{r&&(r=!1,e.style.cursor="",e.style.transform="",setTimeout(()=>{e.style.animationPlayState="running"},100))})}document.addEventListener("DOMContentLoaded",function(){x()});
