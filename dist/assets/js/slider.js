const k=(t,n,i={})=>{const f=document.querySelectorAll(t);if(!f.length)return;const S=new IntersectionObserver((m,p)=>{for(const a of m)a.isIntersecting&&(n(a.target),p.unobserve(a.target))},i);f.forEach(m=>S.observe(m))},D=()=>window.matchMedia("(prefers-reduced-motion: reduce)").matches;function $(t){if(t.dataset.sliderInit==="true")return;t.dataset.sliderInit="true";const n={loop:t.dataset.loop==="true",autoplay:D()?0:parseInt(t.dataset.autoplay,10)||0,dots:t.dataset.dots==="true",nav:t.dataset.nav==="true",swipe:t.dataset.swipe!=="false",centerMode:t.dataset.centerMode==="true",centerPadding:t.dataset.centerPadding||"0px",firstSlideDelay:parseInt(t.dataset.firstSlideDelay,10)||0},i=t.querySelector("[data-slider-track]"),f=Array.from(t.querySelectorAll("[data-slider-slide]")),S=t.querySelector("[data-slider-prev]"),m=t.querySelector("[data-slider-next]"),p=t.querySelector("[data-slider-dots]");if(!i||f.length===0)return;const a=f.length;let r=0,l=0,h=!1,b=null;if(n.loop&&a>1){const e=f[0].cloneNode(!0),s=f[a-1].cloneNode(!0);e.classList.add("is-clone"),s.classList.add("is-clone"),e.removeAttribute("aria-current"),s.removeAttribute("aria-current"),i.appendChild(e),i.insertBefore(s,f[0]),r=1}function q(){if(n.centerMode){const o=t.offsetWidth,d=parseFloat(n.centerPadding)||0,u=n.centerPadding.includes("%")?o*parseFloat(n.centerPadding)/100:d;l=o-u*2}else l=t.offsetWidth;const e=i.querySelectorAll("[data-slider-slide]");e.forEach(o=>{o.style.width=`${l}px`,o.style.flexShrink="0"}),i.style.width=`${l*e.length}px`;const s=n.centerMode?-r*l+(t.offsetWidth-l)/2:-r*l;i.style.transition="none",i.style.transform=`translateX(${s}px)`,requestAnimationFrame(()=>{i.style.transition="transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94)"})}function v(e){if(h)return;h=!0,r=e;const s=n.centerMode?-e*l+(t.offsetWidth-l)/2:-e*l;i.style.transition="transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94)",i.style.transform=`translateX(${s}px)`,w()}function W(e){const s=n.centerMode?-e*l+(t.offsetWidth-l)/2:-e*l;i.style.transition="none",i.style.transform=`translateX(${s}px)`,r=e,w(),i.offsetWidth,requestAnimationFrame(()=>{i.style.transition="transform 0.4s ease",h=!1})}i.addEventListener("transitionend",e=>{if(e.propertyName==="transform"){if(n.loop&&a>1){if(r===0){W(a);return}if(r===a+1){W(1);return}}h=!1}});function x(){return!n.loop||a<=1?r:r===0?a-1:r===a+1?0:r-1}function w(){const e=x();p&&p.querySelectorAll("[data-slider-dot]").forEach((d,u)=>{d.classList.toggle("is-active",u===e),d.setAttribute("aria-current",u===e?"true":"false")}),i.querySelectorAll("[data-slider-slide]").forEach((o,d)=>{if(o.classList.contains("is-clone"))o.removeAttribute("aria-current");else{const L=n.loop&&a>1?d-1:d;o.setAttribute("aria-current",L===e?"true":"false")}})}function A(){(n.loop&&a>1||r<a-1)&&v(r+1),X()}function M(){(n.loop&&a>1||r>0)&&v(r-1),X()}function C(e){const s=n.loop&&a>1?e+1:e;v(s),X()}if(n.dots&&p){p.innerHTML="";for(let e=0;e<a;e++){const s=document.createElement("button");s.type="button",s.className="c-slider__dot",s.setAttribute("data-slider-dot",""),s.setAttribute("aria-label",`スライド ${e+1} へ移動`),s.addEventListener("click",()=>C(e)),p.appendChild(s)}}n.nav&&(S&&S.addEventListener("click",M),m&&m.addEventListener("click",A));function y(){if(!n.autoplay||n.autoplay<=0)return;g();const e=n.firstSlideDelay>0&&x()===0?n.firstSlideDelay:n.autoplay;b=setTimeout(()=>{A(),y()},e)}function g(){b&&(clearTimeout(b),b=null)}function X(){g(),y()}if(t.addEventListener("mouseenter",g),t.addEventListener("mouseleave",y),n.swipe){let u=function(){return n.centerMode?-r*l+(t.offsetWidth-l)/2:-r*l},L=function(c){h||(o=!0,e=c.type.includes("touch")?c.touches[0].clientX:c.clientX,s=e,d=u(),i.style.transition="none",g())},I=function(c){if(!o)return;s=c.type.includes("touch")?c.touches[0].clientX:c.clientX;const T=s-e;i.style.transform=`translateX(${d+T}px)`},E=function(){if(!o)return;o=!1;const c=s-e,T=l*.15;Math.abs(c)>T?(i.style.transition="transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94)",c>0?M():A()):(i.style.transition="transform 0.3s ease-out",i.style.transform=`translateX(${u()}px)`,y())};var z=u,N=L,F=I,B=E;let e=0,s=0,o=!1,d=0;t.addEventListener("touchstart",L,{passive:!0}),t.addEventListener("touchmove",I,{passive:!0}),t.addEventListener("touchend",E,{passive:!0}),t.addEventListener("touchcancel",E,{passive:!0}),t.addEventListener("mousedown",L),document.addEventListener("mousemove",I),document.addEventListener("mouseup",E)}let P;window.addEventListener("resize",()=>{clearTimeout(P),P=setTimeout(q,150)}),q(),w(),y(),t.classList.add("is-slider-ready"),t.sliderAPI={goToNext:A,goToPrev:M,goToSlide:C,getRealIndex:x,pause:g,play:y}}document.addEventListener("DOMContentLoaded",()=>{k("[data-slider]",$,{threshold:.01,rootMargin:"200px 0px"})});window.initSlider=$;
