const A=(e,r,s={})=>{const l=document.querySelectorAll(e);if(!l.length)return;const d=new IntersectionObserver((u,f)=>{for(const o of u)o.isIntersecting&&(r(o.target),f.unobserve(o.target))},s);l.forEach(u=>d.observe(u))};function Q(){const e=document.querySelector("#features-swiper .swiper-wrapper");e&&typeof jQuery<"u"&&jQuery.fn.slick&&A("#features-swiper",l=>{const d=l.closest("section")||l.parentElement,u=jQuery(e),f=d.querySelector(".p-features__dots");u.slick({infinite:!0,speed:600,slidesToShow:1,slidesToScroll:1,centerMode:!0,centerPadding:"0px",autoplay:!0,autoplaySpeed:4e3,pauseOnHover:!0,dots:!0,appendDots:jQuery(f),arrows:!0,prevArrow:d.querySelector(".p-features__prev"),nextArrow:d.querySelector(".p-features__next"),cssEase:"ease-in-out",responsive:[{breakpoint:768,settings:{centerPadding:"0px"}}]})},{threshold:.1,rootMargin:"50px 0px"});const r=document.querySelector("#voice-swiper .swiper-wrapper");r&&typeof jQuery<"u"&&jQuery.fn.slick&&A("#voice-swiper",l=>{const d=l.closest("section")||l.parentElement,u=jQuery(r),f=d.querySelector(".p-voice__dots");u.slick({infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1,centerMode:!0,centerPadding:"6%",autoplay:!0,autoplaySpeed:5e3,pauseOnHover:!0,dots:!0,appendDots:jQuery(f),arrows:!0,prevArrow:d.querySelector(".p-voice__btn--prev"),nextArrow:d.querySelector(".p-voice__btn--next"),cssEase:"ease-in-out"})},{threshold:.1,rootMargin:"50px 0px"}),document.querySelector(".p-crew__slider")&&typeof jQuery<"u"&&jQuery.fn.slick&&A(".p-crew__slider",l=>{const d=jQuery(l),u=d.closest(".p-crew__inner").find(".p-crew__dots");d.slick({infinite:!0,speed:600,slidesToShow:1,slidesToScroll:1,centerMode:!0,centerPadding:"15%",autoplay:!0,autoplaySpeed:3500,pauseOnHover:!0,dots:!0,appendDots:u,arrows:!1,cssEase:"ease-in-out"}),window.crewSlider=d},{threshold:.1,rootMargin:"50px 0px"})}function $(e){if(e.dataset.sliderInit==="true")return;e.dataset.sliderInit="true";const r={loop:e.dataset.loop==="true",autoplay:parseInt(e.dataset.autoplay,10)||0,dots:e.dataset.dots==="true",nav:e.dataset.nav==="true",swipe:e.dataset.swipe!=="false",centerMode:e.dataset.centerMode==="true",centerPadding:e.dataset.centerPadding||"0px",firstSlideDelay:parseInt(e.dataset.firstSlideDelay,10)||0},s=e.querySelector("[data-slider-track]"),l=Array.from(e.querySelectorAll("[data-slider-slide]")),d=e.querySelector("[data-slider-prev]"),u=e.querySelector("[data-slider-next]"),f=e.querySelector("[data-slider-dots]");if(!s||l.length===0)return;const o=l.length;let i=0,a=0,h=!1,E=null;if(r.loop&&o>1){const t=l[0].cloneNode(!0),n=l[o-1].cloneNode(!0);t.classList.add("is-clone"),n.classList.add("is-clone"),t.removeAttribute("aria-current"),n.removeAttribute("aria-current"),s.appendChild(t),s.insertBefore(n,l[0]),i=1}function X(){if(r.centerMode){const c=e.offsetWidth,p=parseFloat(r.centerPadding)||0,v=r.centerPadding.includes("%")?c*parseFloat(r.centerPadding)/100:p;a=c-v*2}else a=e.offsetWidth;const t=s.querySelectorAll("[data-slider-slide]");t.forEach(c=>{c.style.width=`${a}px`,c.style.flexShrink="0"}),s.style.width=`${a*t.length}px`;const n=r.centerMode?-i*a+(e.offsetWidth-a)/2:-i*a;s.style.transition="none",s.style.transform=`translateX(${n}px)`,requestAnimationFrame(()=>{s.style.transition="transform 0.6s cubic-bezier(0.4, 0, 0.2, 1)"})}function S(t){if(h)return;h=!0,i=t;const n=r.centerMode?-t*a+(e.offsetWidth-a)/2:-t*a;s.style.transition="transform 0.6s cubic-bezier(0.4, 0, 0.2, 1)",s.style.transform=`translateX(${n}px)`,_()}function j(t){const n=r.centerMode?-t*a+(e.offsetWidth-a)/2:-t*a;s.style.transition="none",s.style.transform=`translateX(${n}px)`,i=t,_(),s.offsetWidth,requestAnimationFrame(()=>{s.style.transition="transform 0.6s cubic-bezier(0.4, 0, 0.2, 1)",h=!1})}s.addEventListener("transitionend",t=>{if(t.propertyName==="transform"){if(r.loop&&o>1){if(i===0){j(o);return}if(i===o+1){j(1);return}}h=!1}});function L(){return!r.loop||o<=1?i:i===0?o-1:i===o+1?0:i-1}function _(){const t=L();f&&f.querySelectorAll("[data-slider-dot]").forEach((p,v)=>{p.classList.toggle("is-active",v===t),p.setAttribute("aria-current",v===t?"true":"false")}),s.querySelectorAll("[data-slider-slide]").forEach((c,p)=>{if(c.classList.contains("is-clone"))c.removeAttribute("aria-current");else{const g=r.loop&&o>1?p-1:p;c.setAttribute("aria-current",g===t?"true":"false")}})}function b(){(r.loop&&o>1||i<o-1)&&S(i+1),T()}function q(){(r.loop&&o>1||i>0)&&S(i-1),T()}function I(t){const n=r.loop&&o>1?t+1:t;S(n),T()}if(r.dots&&f){f.innerHTML="";for(let t=0;t<o;t++){const n=document.createElement("button");n.type="button",n.className="c-slider__dot",n.setAttribute("data-slider-dot",""),n.setAttribute("aria-label",`スライド ${t+1} へ移動`),n.addEventListener("click",()=>I(t)),f.appendChild(n)}}r.nav&&(d&&d.addEventListener("click",q),u&&u.addEventListener("click",b));function m(){if(!r.autoplay||r.autoplay<=0)return;w();const t=r.firstSlideDelay>0&&L()===0?r.firstSlideDelay:r.autoplay;E=setTimeout(()=>{b(),m()},t)}function w(){E&&(clearTimeout(E),E=null)}function T(){w(),m()}if(e.addEventListener("mouseenter",w),e.addEventListener("mouseleave",m),r.swipe){let v=function(){return r.centerMode?-i*a+(e.offsetWidth-a)/2:-i*a},g=function(y){h||(c=!0,t=y.type.includes("touch")?y.touches[0].clientX:y.clientX,n=t,p=v(),s.style.transition="none",w())},M=function(y){if(!c)return;n=y.type.includes("touch")?y.touches[0].clientX:y.clientX;const k=n-t;s.style.transform=`translateX(${p+k}px)`},x=function(){if(!c)return;c=!1;const y=n-t,k=a*.15;Math.abs(y)>k?(s.style.transition="transform 0.6s cubic-bezier(0.4, 0, 0.2, 1)",y>0?q():b()):(s.style.transition="transform 0.4s cubic-bezier(0.4, 0, 0.2, 1)",s.style.transform=`translateX(${v()}px)`,m())};var W=v,C=g,D=M,z=x;let t=0,n=0,c=!1,p=0;e.addEventListener("touchstart",g,{passive:!0}),e.addEventListener("touchmove",M,{passive:!0}),e.addEventListener("touchend",x,{passive:!0}),e.addEventListener("touchcancel",x,{passive:!0}),e.addEventListener("mousedown",g),document.addEventListener("mousemove",M),document.addEventListener("mouseup",x)}let P;window.addEventListener("resize",()=>{clearTimeout(P),P=setTimeout(X,150)}),X(),_(),m(),e.classList.add("is-slider-ready"),e.sliderAPI={goToNext:b,goToPrev:q,goToSlide:I,getRealIndex:L,pause:w,play:m}}document.addEventListener("DOMContentLoaded",()=>{Q(),A("[data-slider]",$,{threshold:.1,rootMargin:"50px 0px"})});window.initSlider=$;
